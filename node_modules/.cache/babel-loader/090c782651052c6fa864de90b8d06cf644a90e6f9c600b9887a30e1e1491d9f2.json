{"ast":null,"code":"var helper = require('./options-helper');\nvar xml2js = require('./xml2js');\nfunction validateOptions(userOptions) {\n  var options = helper.copyOptions(userOptions);\n  helper.ensureSpacesExists(options);\n  return options;\n}\nmodule.exports = function (xml, userOptions) {\n  var options, js, json, parentKey;\n  options = validateOptions(userOptions);\n  js = xml2js(xml, options);\n  parentKey = 'compact' in options && options.compact ? '_parent' : 'parent';\n  // parentKey = ptions.compact ? '_parent' : 'parent'; // consider this\n  if ('addParent' in options && options.addParent) {\n    json = JSON.stringify(js, function (k, v) {\n      return k === parentKey ? '_' : v;\n    }, options.spaces);\n  } else {\n    json = JSON.stringify(js, null, options.spaces);\n  }\n  return json.replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n};","map":{"version":3,"names":["helper","require","xml2js","validateOptions","userOptions","options","copyOptions","ensureSpacesExists","module","exports","xml","js","json","parentKey","compact","addParent","JSON","stringify","k","v","spaces","replace"],"sources":["/home/miltonejones/projects/state-cast/node_modules/xml-js/lib/xml2json.js"],"sourcesContent":["var helper = require('./options-helper');\r\nvar xml2js = require('./xml2js');\r\n\r\nfunction validateOptions (userOptions) {\r\n  var options = helper.copyOptions(userOptions);\r\n  helper.ensureSpacesExists(options);\r\n  return options;\r\n}\r\n\r\nmodule.exports = function(xml, userOptions) {\r\n  var options, js, json, parentKey;\r\n  options = validateOptions(userOptions);\r\n  js = xml2js(xml, options);\r\n  parentKey = 'compact' in options && options.compact ? '_parent' : 'parent';\r\n  // parentKey = ptions.compact ? '_parent' : 'parent'; // consider this\r\n  if ('addParent' in options && options.addParent) {\r\n    json = JSON.stringify(js, function (k, v) { return k === parentKey? '_' : v; }, options.spaces);\r\n  } else {\r\n    json = JSON.stringify(js, null, options.spaces);\r\n  }\r\n  return json.replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\r\n};\r\n"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AACxC,IAAIC,MAAM,GAAGD,OAAO,CAAC,UAAU,CAAC;AAEhC,SAASE,eAAe,CAAEC,WAAW,EAAE;EACrC,IAAIC,OAAO,GAAGL,MAAM,CAACM,WAAW,CAACF,WAAW,CAAC;EAC7CJ,MAAM,CAACO,kBAAkB,CAACF,OAAO,CAAC;EAClC,OAAOA,OAAO;AAChB;AAEAG,MAAM,CAACC,OAAO,GAAG,UAASC,GAAG,EAAEN,WAAW,EAAE;EAC1C,IAAIC,OAAO,EAAEM,EAAE,EAAEC,IAAI,EAAEC,SAAS;EAChCR,OAAO,GAAGF,eAAe,CAACC,WAAW,CAAC;EACtCO,EAAE,GAAGT,MAAM,CAACQ,GAAG,EAAEL,OAAO,CAAC;EACzBQ,SAAS,GAAG,SAAS,IAAIR,OAAO,IAAIA,OAAO,CAACS,OAAO,GAAG,SAAS,GAAG,QAAQ;EAC1E;EACA,IAAI,WAAW,IAAIT,OAAO,IAAIA,OAAO,CAACU,SAAS,EAAE;IAC/CH,IAAI,GAAGI,IAAI,CAACC,SAAS,CAACN,EAAE,EAAE,UAAUO,CAAC,EAAEC,CAAC,EAAE;MAAE,OAAOD,CAAC,KAAKL,SAAS,GAAE,GAAG,GAAGM,CAAC;IAAE,CAAC,EAAEd,OAAO,CAACe,MAAM,CAAC;EACjG,CAAC,MAAM;IACLR,IAAI,GAAGI,IAAI,CAACC,SAAS,CAACN,EAAE,EAAE,IAAI,EAAEN,OAAO,CAACe,MAAM,CAAC;EACjD;EACA,OAAOR,IAAI,CAACS,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,CAACA,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC;AACzE,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}