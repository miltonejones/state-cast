{"ast":null,"code":"var _jsxFileName = \"/home/miltonejones/projects/state-cast/src/App.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { getPodcasts, getPodcast } from './connector';\nimport { Box } from '@mui/material';\nimport { podcastMachine } from './machines';\nimport { useMachine } from '@xstate/react';\nimport { About, CategoryList, Diagnostics, HomeScreen, Navigation, PodDetail, Wait, SearchResults, StatePlayer, Subscriptions, Toolbar, useStatePlayer } from './components';\nimport { Outer, Inner } from './components/styled';\nimport { getEvent } from './util';\nimport './style.css';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const media = useStatePlayer();\n  const services = {\n    beginSearch: async context => {\n      const pods = await getPodcasts(context.param);\n      return pods.results;\n    },\n    getDetail: async context => {\n      const {\n        feedUrl\n      } = context.podcast;\n      const pod = await getPodcast(feedUrl);\n      return pod;\n    },\n    spawnPlayer: async context => {\n      const {\n        track,\n        trackList\n      } = context;\n      const {\n        url,\n        title,\n        image,\n        owner\n      } = track;\n      media.handlePlay(url, title, image, owner, trackList);\n    },\n    setSubscriptions: async () => {\n      const pods = await getPodcasts('popular');\n      await new Promise(go => setTimeout(go, 499));\n      return pods.results;\n    }\n  };\n  const [state, send] = useMachine(podcastMachine, {\n    services\n  });\n  const forms = {\n    idle: HomeScreen,\n    'search.loaded': SearchResults,\n    begin: Wait,\n    searching: Wait,\n    'detail.loading': Wait,\n    'detail.loaded': PodDetail\n  };\n  const lists = {\n    home: HomeScreen,\n    subs: Subscriptions,\n    list: CategoryList,\n    about: About\n  };\n  const stateKey = Object.keys(forms).find(state.matches);\n  const Form = forms[stateKey];\n  const List = lists[state.context.view];\n  const event = getEvent(podcastMachine.states, state);\n  const childProps = {\n    send,\n    state,\n    event,\n    stateKey\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n        ...childProps,\n        ...state.context\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Navigation, {\n        ...childProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Outer, {\n        children: /*#__PURE__*/_jsxDEV(Inner, {\n          wide: state.matches('detail.loaded'),\n          children: [!!Form && /*#__PURE__*/_jsxDEV(Form, {\n            send: send,\n            stateKey: stateKey,\n            ...state.context\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), !!List && !Form && /*#__PURE__*/_jsxDEV(List, {\n            send: send,\n            stateKey: stateKey,\n            ...state.context\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Diagnostics, {\n        open: state.context.settings === 'podcast_machine',\n        id: podcastMachine.id,\n        state: state,\n        send: send,\n        states: podcastMachine.states\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StatePlayer, {\n      ...media,\n      debug: state.context.settings === 'audio_player'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"RHalLkoxJBaKB4YVN2Wa9U8jYBo=\", false, function () {\n  return [useStatePlayer, useMachine];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","getPodcasts","getPodcast","Box","podcastMachine","useMachine","About","CategoryList","Diagnostics","HomeScreen","Navigation","PodDetail","Wait","SearchResults","StatePlayer","Subscriptions","Toolbar","useStatePlayer","Outer","Inner","getEvent","App","media","services","beginSearch","context","pods","param","results","getDetail","feedUrl","podcast","pod","spawnPlayer","track","trackList","url","title","image","owner","handlePlay","setSubscriptions","Promise","go","setTimeout","state","send","forms","idle","begin","searching","lists","home","subs","list","about","stateKey","Object","keys","find","matches","Form","List","view","event","states","childProps","mb","settings","id"],"sources":["/home/miltonejones/projects/state-cast/src/App.js"],"sourcesContent":["import React from 'react';\nimport { getPodcasts, getPodcast } from './connector';\nimport { Box } from '@mui/material';\nimport { podcastMachine } from './machines';\nimport { useMachine } from '@xstate/react';\nimport {\n  About,\n  CategoryList,\n  Diagnostics,\n  HomeScreen,\n  Navigation,\n  PodDetail,\n  Wait,\n  SearchResults,\n  StatePlayer,\n  Subscriptions,\n  Toolbar,\n  useStatePlayer,\n} from './components';\nimport { Outer, Inner } from './components/styled';\nimport { getEvent } from './util';\nimport './style.css';\n\nexport default function App() {\n  const media = useStatePlayer();\n  const services = {\n    beginSearch: async (context) => {\n      const pods = await getPodcasts(context.param);\n      return pods.results;\n    },\n\n    getDetail: async (context) => {\n      const { feedUrl } = context.podcast;\n      const pod = await getPodcast(feedUrl);\n      return pod;\n    },\n\n    spawnPlayer: async (context) => {\n      const { track, trackList } = context;\n      const { url, title, image, owner } = track;\n      media.handlePlay(url, title, image, owner, trackList);\n    },\n\n    setSubscriptions: async () => {\n      const pods = await getPodcasts('popular');\n      await new Promise((go) => setTimeout(go, 499));\n      return pods.results;\n    },\n  };\n\n  const [state, send] = useMachine(podcastMachine, { services });\n\n  const forms = {\n    idle: HomeScreen,\n    'search.loaded': SearchResults,\n    begin: Wait,\n    searching: Wait,\n    'detail.loading': Wait,\n    'detail.loaded': PodDetail,\n  };\n\n  const lists = {\n    home: HomeScreen,\n    subs: Subscriptions,\n    list: CategoryList,\n    about: About,\n  };\n\n  const stateKey = Object.keys(forms).find(state.matches);\n  const Form = forms[stateKey];\n  const List = lists[state.context.view];\n  const event = getEvent(podcastMachine.states, state);\n  const childProps = {\n    send,\n    state,\n    event,\n    stateKey,\n  };\n\n  return (\n    <>\n      <Box sx={{ mb: 20 }}>\n        <Toolbar {...childProps} {...state.context} />\n\n        <Navigation {...childProps} />\n\n        <Outer>\n          <Inner wide={state.matches('detail.loaded')}>\n            {!!Form && (\n              <Form send={send} stateKey={stateKey} {...state.context} />\n            )}\n            {!!List && !Form && (\n              <List send={send} stateKey={stateKey} {...state.context} />\n            )}\n          </Inner>\n        </Outer>\n\n        <Diagnostics\n          open={state.context.settings === 'podcast_machine'}\n          id={podcastMachine.id}\n          state={state}\n          send={send}\n          states={podcastMachine.states}\n        />\n      </Box>\n\n      <StatePlayer\n        {...media}\n        debug={state.context.settings === 'audio_player'}\n      />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}