{"ast":null,"code":"var helper = require('./options-helper');\nvar isArray = require('./array-helper').isArray;\nvar currentElement, currentElementName;\nfunction validateOptions(userOptions) {\n  var options = helper.copyOptions(userOptions);\n  helper.ensureFlagExists('ignoreDeclaration', options);\n  helper.ensureFlagExists('ignoreInstruction', options);\n  helper.ensureFlagExists('ignoreAttributes', options);\n  helper.ensureFlagExists('ignoreText', options);\n  helper.ensureFlagExists('ignoreComment', options);\n  helper.ensureFlagExists('ignoreCdata', options);\n  helper.ensureFlagExists('ignoreDoctype', options);\n  helper.ensureFlagExists('compact', options);\n  helper.ensureFlagExists('indentText', options);\n  helper.ensureFlagExists('indentCdata', options);\n  helper.ensureFlagExists('indentAttributes', options);\n  helper.ensureFlagExists('indentInstruction', options);\n  helper.ensureFlagExists('fullTagEmptyElement', options);\n  helper.ensureFlagExists('noQuotesForNativeAttributes', options);\n  helper.ensureSpacesExists(options);\n  if (typeof options.spaces === 'number') {\n    options.spaces = Array(options.spaces + 1).join(' ');\n  }\n  helper.ensureKeyExists('declaration', options);\n  helper.ensureKeyExists('instruction', options);\n  helper.ensureKeyExists('attributes', options);\n  helper.ensureKeyExists('text', options);\n  helper.ensureKeyExists('comment', options);\n  helper.ensureKeyExists('cdata', options);\n  helper.ensureKeyExists('doctype', options);\n  helper.ensureKeyExists('type', options);\n  helper.ensureKeyExists('name', options);\n  helper.ensureKeyExists('elements', options);\n  helper.checkFnExists('doctype', options);\n  helper.checkFnExists('instruction', options);\n  helper.checkFnExists('cdata', options);\n  helper.checkFnExists('comment', options);\n  helper.checkFnExists('text', options);\n  helper.checkFnExists('instructionName', options);\n  helper.checkFnExists('elementName', options);\n  helper.checkFnExists('attributeName', options);\n  helper.checkFnExists('attributeValue', options);\n  helper.checkFnExists('attributes', options);\n  helper.checkFnExists('fullTagEmptyElement', options);\n  return options;\n}\nfunction writeIndentation(options, depth, firstLine) {\n  return (!firstLine && options.spaces ? '\\n' : '') + Array(depth + 1).join(options.spaces);\n}\nfunction writeAttributes(attributes, options, depth) {\n  if (options.ignoreAttributes) {\n    return '';\n  }\n  if ('attributesFn' in options) {\n    attributes = options.attributesFn(attributes, currentElementName, currentElement);\n  }\n  var key,\n    attr,\n    attrName,\n    quote,\n    result = [];\n  for (key in attributes) {\n    if (attributes.hasOwnProperty(key) && attributes[key] !== null && attributes[key] !== undefined) {\n      quote = options.noQuotesForNativeAttributes && typeof attributes[key] !== 'string' ? '' : '\"';\n      attr = '' + attributes[key]; // ensure number and boolean are converted to String\n      attr = attr.replace(/\"/g, '&quot;');\n      attrName = 'attributeNameFn' in options ? options.attributeNameFn(key, attr, currentElementName, currentElement) : key;\n      result.push(options.spaces && options.indentAttributes ? writeIndentation(options, depth + 1, false) : ' ');\n      result.push(attrName + '=' + quote + ('attributeValueFn' in options ? options.attributeValueFn(attr, key, currentElementName, currentElement) : attr) + quote);\n    }\n  }\n  if (attributes && Object.keys(attributes).length && options.spaces && options.indentAttributes) {\n    result.push(writeIndentation(options, depth, false));\n  }\n  return result.join('');\n}\nfunction writeDeclaration(declaration, options, depth) {\n  currentElement = declaration;\n  currentElementName = 'xml';\n  return options.ignoreDeclaration ? '' : '<?' + 'xml' + writeAttributes(declaration[options.attributesKey], options, depth) + '?>';\n}\nfunction writeInstruction(instruction, options, depth) {\n  if (options.ignoreInstruction) {\n    return '';\n  }\n  var key;\n  for (key in instruction) {\n    if (instruction.hasOwnProperty(key)) {\n      break;\n    }\n  }\n  var instructionName = 'instructionNameFn' in options ? options.instructionNameFn(key, instruction[key], currentElementName, currentElement) : key;\n  if (typeof instruction[key] === 'object') {\n    currentElement = instruction;\n    currentElementName = instructionName;\n    return '<?' + instructionName + writeAttributes(instruction[key][options.attributesKey], options, depth) + '?>';\n  } else {\n    var instructionValue = instruction[key] ? instruction[key] : '';\n    if ('instructionFn' in options) instructionValue = options.instructionFn(instructionValue, key, currentElementName, currentElement);\n    return '<?' + instructionName + (instructionValue ? ' ' + instructionValue : '') + '?>';\n  }\n}\nfunction writeComment(comment, options) {\n  return options.ignoreComment ? '' : '<!--' + ('commentFn' in options ? options.commentFn(comment, currentElementName, currentElement) : comment) + '-->';\n}\nfunction writeCdata(cdata, options) {\n  return options.ignoreCdata ? '' : '<![CDATA[' + ('cdataFn' in options ? options.cdataFn(cdata, currentElementName, currentElement) : cdata.replace(']]>', ']]]]><![CDATA[>')) + ']]>';\n}\nfunction writeDoctype(doctype, options) {\n  return options.ignoreDoctype ? '' : '<!DOCTYPE ' + ('doctypeFn' in options ? options.doctypeFn(doctype, currentElementName, currentElement) : doctype) + '>';\n}\nfunction writeText(text, options) {\n  if (options.ignoreText) return '';\n  text = '' + text; // ensure Number and Boolean are converted to String\n  text = text.replace(/&amp;/g, '&'); // desanitize to avoid double sanitization\n  text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return 'textFn' in options ? options.textFn(text, currentElementName, currentElement) : text;\n}\nfunction hasContent(element, options) {\n  var i;\n  if (element.elements && element.elements.length) {\n    for (i = 0; i < element.elements.length; ++i) {\n      switch (element.elements[i][options.typeKey]) {\n        case 'text':\n          if (options.indentText) {\n            return true;\n          }\n          break;\n        // skip to next key\n        case 'cdata':\n          if (options.indentCdata) {\n            return true;\n          }\n          break;\n        // skip to next key\n        case 'instruction':\n          if (options.indentInstruction) {\n            return true;\n          }\n          break;\n        // skip to next key\n        case 'doctype':\n        case 'comment':\n        case 'element':\n          return true;\n        default:\n          return true;\n      }\n    }\n  }\n  return false;\n}\nfunction writeElement(element, options, depth) {\n  currentElement = element;\n  currentElementName = element.name;\n  var xml = [],\n    elementName = 'elementNameFn' in options ? options.elementNameFn(element.name, element) : element.name;\n  xml.push('<' + elementName);\n  if (element[options.attributesKey]) {\n    xml.push(writeAttributes(element[options.attributesKey], options, depth));\n  }\n  var withClosingTag = element[options.elementsKey] && element[options.elementsKey].length || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n  if (!withClosingTag) {\n    if ('fullTagEmptyElementFn' in options) {\n      withClosingTag = options.fullTagEmptyElementFn(element.name, element);\n    } else {\n      withClosingTag = options.fullTagEmptyElement;\n    }\n  }\n  if (withClosingTag) {\n    xml.push('>');\n    if (element[options.elementsKey] && element[options.elementsKey].length) {\n      xml.push(writeElements(element[options.elementsKey], options, depth + 1));\n      currentElement = element;\n      currentElementName = element.name;\n    }\n    xml.push(options.spaces && hasContent(element, options) ? '\\n' + Array(depth + 1).join(options.spaces) : '');\n    xml.push('</' + elementName + '>');\n  } else {\n    xml.push('/>');\n  }\n  return xml.join('');\n}\nfunction writeElements(elements, options, depth, firstLine) {\n  return elements.reduce(function (xml, element) {\n    var indent = writeIndentation(options, depth, firstLine && !xml);\n    switch (element.type) {\n      case 'element':\n        return xml + indent + writeElement(element, options, depth);\n      case 'comment':\n        return xml + indent + writeComment(element[options.commentKey], options);\n      case 'doctype':\n        return xml + indent + writeDoctype(element[options.doctypeKey], options);\n      case 'cdata':\n        return xml + (options.indentCdata ? indent : '') + writeCdata(element[options.cdataKey], options);\n      case 'text':\n        return xml + (options.indentText ? indent : '') + writeText(element[options.textKey], options);\n      case 'instruction':\n        var instruction = {};\n        instruction[element[options.nameKey]] = element[options.attributesKey] ? element : element[options.instructionKey];\n        return xml + (options.indentInstruction ? indent : '') + writeInstruction(instruction, options, depth);\n    }\n  }, '');\n}\nfunction hasContentCompact(element, options, anyContent) {\n  var key;\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      switch (key) {\n        case options.parentKey:\n        case options.attributesKey:\n          break;\n        // skip to next key\n        case options.textKey:\n          if (options.indentText || anyContent) {\n            return true;\n          }\n          break;\n        // skip to next key\n        case options.cdataKey:\n          if (options.indentCdata || anyContent) {\n            return true;\n          }\n          break;\n        // skip to next key\n        case options.instructionKey:\n          if (options.indentInstruction || anyContent) {\n            return true;\n          }\n          break;\n        // skip to next key\n        case options.doctypeKey:\n        case options.commentKey:\n          return true;\n        default:\n          return true;\n      }\n    }\n  }\n  return false;\n}\nfunction writeElementCompact(element, name, options, depth, indent) {\n  currentElement = element;\n  currentElementName = name;\n  var elementName = 'elementNameFn' in options ? options.elementNameFn(name, element) : name;\n  if (typeof element === 'undefined' || element === null || element === '') {\n    return 'fullTagEmptyElementFn' in options && options.fullTagEmptyElementFn(name, element) || options.fullTagEmptyElement ? '<' + elementName + '></' + elementName + '>' : '<' + elementName + '/>';\n  }\n  var xml = [];\n  if (name) {\n    xml.push('<' + elementName);\n    if (typeof element !== 'object') {\n      xml.push('>' + writeText(element, options) + '</' + elementName + '>');\n      return xml.join('');\n    }\n    if (element[options.attributesKey]) {\n      xml.push(writeAttributes(element[options.attributesKey], options, depth));\n    }\n    var withClosingTag = hasContentCompact(element, options, true) || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n    if (!withClosingTag) {\n      if ('fullTagEmptyElementFn' in options) {\n        withClosingTag = options.fullTagEmptyElementFn(name, element);\n      } else {\n        withClosingTag = options.fullTagEmptyElement;\n      }\n    }\n    if (withClosingTag) {\n      xml.push('>');\n    } else {\n      xml.push('/>');\n      return xml.join('');\n    }\n  }\n  xml.push(writeElementsCompact(element, options, depth + 1, false));\n  currentElement = element;\n  currentElementName = name;\n  if (name) {\n    xml.push((indent ? writeIndentation(options, depth, false) : '') + '</' + elementName + '>');\n  }\n  return xml.join('');\n}\nfunction writeElementsCompact(element, options, depth, firstLine) {\n  var i,\n    key,\n    nodes,\n    xml = [];\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      nodes = isArray(element[key]) ? element[key] : [element[key]];\n      for (i = 0; i < nodes.length; ++i) {\n        switch (key) {\n          case options.declarationKey:\n            xml.push(writeDeclaration(nodes[i], options, depth));\n            break;\n          case options.instructionKey:\n            xml.push((options.indentInstruction ? writeIndentation(options, depth, firstLine) : '') + writeInstruction(nodes[i], options, depth));\n            break;\n          case options.attributesKey:\n          case options.parentKey:\n            break;\n          // skip\n          case options.textKey:\n            xml.push((options.indentText ? writeIndentation(options, depth, firstLine) : '') + writeText(nodes[i], options));\n            break;\n          case options.cdataKey:\n            xml.push((options.indentCdata ? writeIndentation(options, depth, firstLine) : '') + writeCdata(nodes[i], options));\n            break;\n          case options.doctypeKey:\n            xml.push(writeIndentation(options, depth, firstLine) + writeDoctype(nodes[i], options));\n            break;\n          case options.commentKey:\n            xml.push(writeIndentation(options, depth, firstLine) + writeComment(nodes[i], options));\n            break;\n          default:\n            xml.push(writeIndentation(options, depth, firstLine) + writeElementCompact(nodes[i], key, options, depth, hasContentCompact(nodes[i], options)));\n        }\n        firstLine = firstLine && !xml.length;\n      }\n    }\n  }\n  return xml.join('');\n}\nmodule.exports = function (js, options) {\n  options = validateOptions(options);\n  var xml = [];\n  currentElement = js;\n  currentElementName = '_root_';\n  if (options.compact) {\n    xml.push(writeElementsCompact(js, options, 0, true));\n  } else {\n    if (js[options.declarationKey]) {\n      xml.push(writeDeclaration(js[options.declarationKey], options, 0));\n    }\n    if (js[options.elementsKey] && js[options.elementsKey].length) {\n      xml.push(writeElements(js[options.elementsKey], options, 0, !xml.length));\n    }\n  }\n  return xml.join('');\n};","map":{"version":3,"names":["helper","require","isArray","currentElement","currentElementName","validateOptions","userOptions","options","copyOptions","ensureFlagExists","ensureSpacesExists","spaces","Array","join","ensureKeyExists","checkFnExists","writeIndentation","depth","firstLine","writeAttributes","attributes","ignoreAttributes","attributesFn","key","attr","attrName","quote","result","hasOwnProperty","undefined","noQuotesForNativeAttributes","replace","attributeNameFn","push","indentAttributes","attributeValueFn","Object","keys","length","writeDeclaration","declaration","ignoreDeclaration","attributesKey","writeInstruction","instruction","ignoreInstruction","instructionName","instructionNameFn","instructionValue","instructionFn","writeComment","comment","ignoreComment","commentFn","writeCdata","cdata","ignoreCdata","cdataFn","writeDoctype","doctype","ignoreDoctype","doctypeFn","writeText","text","ignoreText","textFn","hasContent","element","i","elements","typeKey","indentText","indentCdata","indentInstruction","writeElement","name","xml","elementName","elementNameFn","withClosingTag","elementsKey","fullTagEmptyElementFn","fullTagEmptyElement","writeElements","reduce","indent","type","commentKey","doctypeKey","cdataKey","textKey","nameKey","instructionKey","hasContentCompact","anyContent","parentKey","writeElementCompact","writeElementsCompact","nodes","declarationKey","module","exports","js","compact"],"sources":["/home/miltonejones/projects/state-cast/node_modules/xml-js/lib/js2xml.js"],"sourcesContent":["var helper = require('./options-helper');\nvar isArray = require('./array-helper').isArray;\n\nvar currentElement, currentElementName;\n\nfunction validateOptions(userOptions) {\n  var options = helper.copyOptions(userOptions);\n  helper.ensureFlagExists('ignoreDeclaration', options);\n  helper.ensureFlagExists('ignoreInstruction', options);\n  helper.ensureFlagExists('ignoreAttributes', options);\n  helper.ensureFlagExists('ignoreText', options);\n  helper.ensureFlagExists('ignoreComment', options);\n  helper.ensureFlagExists('ignoreCdata', options);\n  helper.ensureFlagExists('ignoreDoctype', options);\n  helper.ensureFlagExists('compact', options);\n  helper.ensureFlagExists('indentText', options);\n  helper.ensureFlagExists('indentCdata', options);\n  helper.ensureFlagExists('indentAttributes', options);\n  helper.ensureFlagExists('indentInstruction', options);\n  helper.ensureFlagExists('fullTagEmptyElement', options);\n  helper.ensureFlagExists('noQuotesForNativeAttributes', options);\n  helper.ensureSpacesExists(options);\n  if (typeof options.spaces === 'number') {\n    options.spaces = Array(options.spaces + 1).join(' ');\n  }\n  helper.ensureKeyExists('declaration', options);\n  helper.ensureKeyExists('instruction', options);\n  helper.ensureKeyExists('attributes', options);\n  helper.ensureKeyExists('text', options);\n  helper.ensureKeyExists('comment', options);\n  helper.ensureKeyExists('cdata', options);\n  helper.ensureKeyExists('doctype', options);\n  helper.ensureKeyExists('type', options);\n  helper.ensureKeyExists('name', options);\n  helper.ensureKeyExists('elements', options);\n  helper.checkFnExists('doctype', options);\n  helper.checkFnExists('instruction', options);\n  helper.checkFnExists('cdata', options);\n  helper.checkFnExists('comment', options);\n  helper.checkFnExists('text', options);\n  helper.checkFnExists('instructionName', options);\n  helper.checkFnExists('elementName', options);\n  helper.checkFnExists('attributeName', options);\n  helper.checkFnExists('attributeValue', options);\n  helper.checkFnExists('attributes', options);\n  helper.checkFnExists('fullTagEmptyElement', options);\n  return options;\n}\n\nfunction writeIndentation(options, depth, firstLine) {\n  return (!firstLine && options.spaces ? '\\n' : '') + Array(depth + 1).join(options.spaces);\n}\n\nfunction writeAttributes(attributes, options, depth) {\n  if (options.ignoreAttributes) {\n    return '';\n  }\n  if ('attributesFn' in options) {\n    attributes = options.attributesFn(attributes, currentElementName, currentElement);\n  }\n  var key, attr, attrName, quote, result = [];\n  for (key in attributes) {\n    if (attributes.hasOwnProperty(key) && attributes[key] !== null && attributes[key] !== undefined) {\n      quote = options.noQuotesForNativeAttributes && typeof attributes[key] !== 'string' ? '' : '\"';\n      attr = '' + attributes[key]; // ensure number and boolean are converted to String\n      attr = attr.replace(/\"/g, '&quot;');\n      attrName = 'attributeNameFn' in options ? options.attributeNameFn(key, attr, currentElementName, currentElement) : key;\n      result.push((options.spaces && options.indentAttributes? writeIndentation(options, depth+1, false) : ' '));\n      result.push(attrName + '=' + quote + ('attributeValueFn' in options ? options.attributeValueFn(attr, key, currentElementName, currentElement) : attr) + quote);\n    }\n  }\n  if (attributes && Object.keys(attributes).length && options.spaces && options.indentAttributes) {\n    result.push(writeIndentation(options, depth, false));\n  }\n  return result.join('');\n}\n\nfunction writeDeclaration(declaration, options, depth) {\n  currentElement = declaration;\n  currentElementName = 'xml';\n  return options.ignoreDeclaration ? '' :  '<?' + 'xml' + writeAttributes(declaration[options.attributesKey], options, depth) + '?>';\n}\n\nfunction writeInstruction(instruction, options, depth) {\n  if (options.ignoreInstruction) {\n    return '';\n  }\n  var key;\n  for (key in instruction) {\n    if (instruction.hasOwnProperty(key)) {\n      break;\n    }\n  }\n  var instructionName = 'instructionNameFn' in options ? options.instructionNameFn(key, instruction[key], currentElementName, currentElement) : key;\n  if (typeof instruction[key] === 'object') {\n    currentElement = instruction;\n    currentElementName = instructionName;\n    return '<?' + instructionName + writeAttributes(instruction[key][options.attributesKey], options, depth) + '?>';\n  } else {\n    var instructionValue = instruction[key] ? instruction[key] : '';\n    if ('instructionFn' in options) instructionValue = options.instructionFn(instructionValue, key, currentElementName, currentElement);\n    return '<?' + instructionName + (instructionValue ? ' ' + instructionValue : '') + '?>';\n  }\n}\n\nfunction writeComment(comment, options) {\n  return options.ignoreComment ? '' : '<!--' + ('commentFn' in options ? options.commentFn(comment, currentElementName, currentElement) : comment) + '-->';\n}\n\nfunction writeCdata(cdata, options) {\n  return options.ignoreCdata ? '' : '<![CDATA[' + ('cdataFn' in options ? options.cdataFn(cdata, currentElementName, currentElement) : cdata.replace(']]>', ']]]]><![CDATA[>')) + ']]>';\n}\n\nfunction writeDoctype(doctype, options) {\n  return options.ignoreDoctype ? '' : '<!DOCTYPE ' + ('doctypeFn' in options ? options.doctypeFn(doctype, currentElementName, currentElement) : doctype) + '>';\n}\n\nfunction writeText(text, options) {\n  if (options.ignoreText) return '';\n  text = '' + text; // ensure Number and Boolean are converted to String\n  text = text.replace(/&amp;/g, '&'); // desanitize to avoid double sanitization\n  text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  return 'textFn' in options ? options.textFn(text, currentElementName, currentElement) : text;\n}\n\nfunction hasContent(element, options) {\n  var i;\n  if (element.elements && element.elements.length) {\n    for (i = 0; i < element.elements.length; ++i) {\n      switch (element.elements[i][options.typeKey]) {\n      case 'text':\n        if (options.indentText) {\n          return true;\n        }\n        break; // skip to next key\n      case 'cdata':\n        if (options.indentCdata) {\n          return true;\n        }\n        break; // skip to next key\n      case 'instruction':\n        if (options.indentInstruction) {\n          return true;\n        }\n        break; // skip to next key\n      case 'doctype':\n      case 'comment':\n      case 'element':\n        return true;\n      default:\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction writeElement(element, options, depth) {\n  currentElement = element;\n  currentElementName = element.name;\n  var xml = [], elementName = 'elementNameFn' in options ? options.elementNameFn(element.name, element) : element.name;\n  xml.push('<' + elementName);\n  if (element[options.attributesKey]) {\n    xml.push(writeAttributes(element[options.attributesKey], options, depth));\n  }\n  var withClosingTag = element[options.elementsKey] && element[options.elementsKey].length || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n  if (!withClosingTag) {\n    if ('fullTagEmptyElementFn' in options) {\n      withClosingTag = options.fullTagEmptyElementFn(element.name, element);\n    } else {\n      withClosingTag = options.fullTagEmptyElement;\n    }\n  }\n  if (withClosingTag) {\n    xml.push('>');\n    if (element[options.elementsKey] && element[options.elementsKey].length) {\n      xml.push(writeElements(element[options.elementsKey], options, depth + 1));\n      currentElement = element;\n      currentElementName = element.name;\n    }\n    xml.push(options.spaces && hasContent(element, options) ? '\\n' + Array(depth + 1).join(options.spaces) : '');\n    xml.push('</' + elementName + '>');\n  } else {\n    xml.push('/>');\n  }\n  return xml.join('');\n}\n\nfunction writeElements(elements, options, depth, firstLine) {\n  return elements.reduce(function (xml, element) {\n    var indent = writeIndentation(options, depth, firstLine && !xml);\n    switch (element.type) {\n    case 'element': return xml + indent + writeElement(element, options, depth);\n    case 'comment': return xml + indent + writeComment(element[options.commentKey], options);\n    case 'doctype': return xml + indent + writeDoctype(element[options.doctypeKey], options);\n    case 'cdata': return xml + (options.indentCdata ? indent : '') + writeCdata(element[options.cdataKey], options);\n    case 'text': return xml + (options.indentText ? indent : '') + writeText(element[options.textKey], options);\n    case 'instruction':\n      var instruction = {};\n      instruction[element[options.nameKey]] = element[options.attributesKey] ? element : element[options.instructionKey];\n      return xml + (options.indentInstruction ? indent : '') + writeInstruction(instruction, options, depth);\n    }\n  }, '');\n}\n\nfunction hasContentCompact(element, options, anyContent) {\n  var key;\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      switch (key) {\n      case options.parentKey:\n      case options.attributesKey:\n        break; // skip to next key\n      case options.textKey:\n        if (options.indentText || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.cdataKey:\n        if (options.indentCdata || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.instructionKey:\n        if (options.indentInstruction || anyContent) {\n          return true;\n        }\n        break; // skip to next key\n      case options.doctypeKey:\n      case options.commentKey:\n        return true;\n      default:\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction writeElementCompact(element, name, options, depth, indent) {\n  currentElement = element;\n  currentElementName = name;\n  var elementName = 'elementNameFn' in options ? options.elementNameFn(name, element) : name;\n  if (typeof element === 'undefined' || element === null || element === '') {\n    return 'fullTagEmptyElementFn' in options && options.fullTagEmptyElementFn(name, element) || options.fullTagEmptyElement ? '<' + elementName + '></' + elementName + '>' : '<' + elementName + '/>';\n  }\n  var xml = [];\n  if (name) {\n    xml.push('<' + elementName);\n    if (typeof element !== 'object') {\n      xml.push('>' + writeText(element,options) + '</' + elementName + '>');\n      return xml.join('');\n    }\n    if (element[options.attributesKey]) {\n      xml.push(writeAttributes(element[options.attributesKey], options, depth));\n    }\n    var withClosingTag = hasContentCompact(element, options, true) || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';\n    if (!withClosingTag) {\n      if ('fullTagEmptyElementFn' in options) {\n        withClosingTag = options.fullTagEmptyElementFn(name, element);\n      } else {\n        withClosingTag = options.fullTagEmptyElement;\n      }\n    }\n    if (withClosingTag) {\n      xml.push('>');\n    } else {\n      xml.push('/>');\n      return xml.join('');\n    }\n  }\n  xml.push(writeElementsCompact(element, options, depth + 1, false));\n  currentElement = element;\n  currentElementName = name;\n  if (name) {\n    xml.push((indent ? writeIndentation(options, depth, false) : '') + '</' + elementName + '>');\n  }\n  return xml.join('');\n}\n\nfunction writeElementsCompact(element, options, depth, firstLine) {\n  var i, key, nodes, xml = [];\n  for (key in element) {\n    if (element.hasOwnProperty(key)) {\n      nodes = isArray(element[key]) ? element[key] : [element[key]];\n      for (i = 0; i < nodes.length; ++i) {\n        switch (key) {\n        case options.declarationKey: xml.push(writeDeclaration(nodes[i], options, depth)); break;\n        case options.instructionKey: xml.push((options.indentInstruction ? writeIndentation(options, depth, firstLine) : '') + writeInstruction(nodes[i], options, depth)); break;\n        case options.attributesKey: case options.parentKey: break; // skip\n        case options.textKey: xml.push((options.indentText ? writeIndentation(options, depth, firstLine) : '') + writeText(nodes[i], options)); break;\n        case options.cdataKey: xml.push((options.indentCdata ? writeIndentation(options, depth, firstLine) : '') + writeCdata(nodes[i], options)); break;\n        case options.doctypeKey: xml.push(writeIndentation(options, depth, firstLine) + writeDoctype(nodes[i], options)); break;\n        case options.commentKey: xml.push(writeIndentation(options, depth, firstLine) + writeComment(nodes[i], options)); break;\n        default: xml.push(writeIndentation(options, depth, firstLine) + writeElementCompact(nodes[i], key, options, depth, hasContentCompact(nodes[i], options)));\n        }\n        firstLine = firstLine && !xml.length;\n      }\n    }\n  }\n  return xml.join('');\n}\n\nmodule.exports = function (js, options) {\n  options = validateOptions(options);\n  var xml = [];\n  currentElement = js;\n  currentElementName = '_root_';\n  if (options.compact) {\n    xml.push(writeElementsCompact(js, options, 0, true));\n  } else {\n    if (js[options.declarationKey]) {\n      xml.push(writeDeclaration(js[options.declarationKey], options, 0));\n    }\n    if (js[options.elementsKey] && js[options.elementsKey].length) {\n      xml.push(writeElements(js[options.elementsKey], options, 0, !xml.length));\n    }\n  }\n  return xml.join('');\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}