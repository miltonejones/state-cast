{"ast":null,"code":"const frameLooper = (analyser, fn) => {\n  const repeater = () => frameLooper(analyser, fn);\n  window.RequestAnimationFrame = window.requestAnimationFrame(repeater) || window.msRequestAnimationFrame(repeater) || window.mozRequestAnimationFrame(repeater) || window.webkitRequestAnimationFrame(repeater);\n  const fbc_array = new Uint8Array(analyser.frequencyBinCount);\n  const bar_count = 32; //window.innerWidth / 2;\n\n  analyser.getByteFrequencyData(fbc_array);\n\n  // context.clearRect(0, 0, canvas.width, canvas.height);\n  // context.fillStyle = \"#ffffff\";\n\n  const coords = [];\n  for (var i = 0; i < bar_count; i++) {\n    const bar_pos = i * 4;\n    const bar_width = 2;\n    const bar_height = -(fbc_array[i] / 2);\n    coords.push({\n      bar_pos,\n      bar_width,\n      bar_height\n    });\n  }\n  fn && fn(coords);\n  return coords;\n};\nclass AudioConnector {\n  connect(audio) {\n    audio.crossOrigin = 'anonymous';\n    this.context = new AudioContext();\n    this.analyser = this.context.createAnalyser();\n    this.source = this.context.createMediaElementSource(audio);\n    this.source.connect(this.analyser);\n    this.analyser.connect(this.context.destination);\n    this.connected = true;\n    return {\n      analyser: this.analyser,\n      audioContext: this.context\n    };\n  }\n}\nexport { AudioConnector, frameLooper };","map":{"version":3,"names":["frameLooper","analyser","fn","repeater","window","RequestAnimationFrame","requestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","fbc_array","Uint8Array","frequencyBinCount","bar_count","getByteFrequencyData","coords","i","bar_pos","bar_width","bar_height","push","AudioConnector","connect","audio","crossOrigin","context","AudioContext","createAnalyser","source","createMediaElementSource","destination","connected","audioContext"],"sources":["/home/miltonejones/projects/state-cast/src/components/eq.js"],"sourcesContent":["const frameLooper = (analyser, fn) => {\r\n  const repeater = () => frameLooper(analyser, fn);\r\n  window.RequestAnimationFrame =\r\n    window.requestAnimationFrame(repeater) ||\r\n    window.msRequestAnimationFrame(repeater) ||\r\n    window.mozRequestAnimationFrame(repeater) ||\r\n    window.webkitRequestAnimationFrame(repeater);\r\n\r\n  const fbc_array = new Uint8Array(analyser.frequencyBinCount);\r\n  const bar_count = 32; //window.innerWidth / 2;\r\n\r\n  analyser.getByteFrequencyData(fbc_array);\r\n\r\n  // context.clearRect(0, 0, canvas.width, canvas.height);\r\n  // context.fillStyle = \"#ffffff\";\r\n\r\n  const coords = [];\r\n\r\n  for (var i = 0; i < bar_count; i++) {\r\n    const bar_pos = i * 4;\r\n    const bar_width = 2;\r\n    const bar_height = -(fbc_array[i] / 2);\r\n    coords.push({ bar_pos, bar_width, bar_height });\r\n  }\r\n  fn && fn(coords);\r\n  return coords;\r\n};\r\n\r\nclass AudioConnector {\r\n  connect(audio) {\r\n    audio.crossOrigin = 'anonymous';\r\n    this.context = new AudioContext();\r\n    this.analyser = this.context.createAnalyser();\r\n    this.source = this.context.createMediaElementSource(audio);\r\n    this.source.connect(this.analyser);\r\n    this.analyser.connect(this.context.destination);\r\n    this.connected = true;\r\n\r\n    return {\r\n      analyser: this.analyser,\r\n      audioContext: this.context,\r\n    };\r\n  }\r\n}\r\n\r\nexport { AudioConnector, frameLooper };\r\n"],"mappings":"AAAA,MAAMA,WAAW,GAAG,CAACC,QAAQ,EAAEC,EAAE,KAAK;EACpC,MAAMC,QAAQ,GAAG,MAAMH,WAAW,CAACC,QAAQ,EAAEC,EAAE,CAAC;EAChDE,MAAM,CAACC,qBAAqB,GAC1BD,MAAM,CAACE,qBAAqB,CAACH,QAAQ,CAAC,IACtCC,MAAM,CAACG,uBAAuB,CAACJ,QAAQ,CAAC,IACxCC,MAAM,CAACI,wBAAwB,CAACL,QAAQ,CAAC,IACzCC,MAAM,CAACK,2BAA2B,CAACN,QAAQ,CAAC;EAE9C,MAAMO,SAAS,GAAG,IAAIC,UAAU,CAACV,QAAQ,CAACW,iBAAiB,CAAC;EAC5D,MAAMC,SAAS,GAAG,EAAE,CAAC,CAAC;;EAEtBZ,QAAQ,CAACa,oBAAoB,CAACJ,SAAS,CAAC;;EAExC;EACA;;EAEA,MAAMK,MAAM,GAAG,EAAE;EAEjB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,SAAS,EAAEG,CAAC,EAAE,EAAE;IAClC,MAAMC,OAAO,GAAGD,CAAC,GAAG,CAAC;IACrB,MAAME,SAAS,GAAG,CAAC;IACnB,MAAMC,UAAU,GAAG,EAAET,SAAS,CAACM,CAAC,CAAC,GAAG,CAAC,CAAC;IACtCD,MAAM,CAACK,IAAI,CAAC;MAAEH,OAAO;MAAEC,SAAS;MAAEC;IAAW,CAAC,CAAC;EACjD;EACAjB,EAAE,IAAIA,EAAE,CAACa,MAAM,CAAC;EAChB,OAAOA,MAAM;AACf,CAAC;AAED,MAAMM,cAAc,CAAC;EACnBC,OAAO,CAACC,KAAK,EAAE;IACbA,KAAK,CAACC,WAAW,GAAG,WAAW;IAC/B,IAAI,CAACC,OAAO,GAAG,IAAIC,YAAY,EAAE;IACjC,IAAI,CAACzB,QAAQ,GAAG,IAAI,CAACwB,OAAO,CAACE,cAAc,EAAE;IAC7C,IAAI,CAACC,MAAM,GAAG,IAAI,CAACH,OAAO,CAACI,wBAAwB,CAACN,KAAK,CAAC;IAC1D,IAAI,CAACK,MAAM,CAACN,OAAO,CAAC,IAAI,CAACrB,QAAQ,CAAC;IAClC,IAAI,CAACA,QAAQ,CAACqB,OAAO,CAAC,IAAI,CAACG,OAAO,CAACK,WAAW,CAAC;IAC/C,IAAI,CAACC,SAAS,GAAG,IAAI;IAErB,OAAO;MACL9B,QAAQ,EAAE,IAAI,CAACA,QAAQ;MACvB+B,YAAY,EAAE,IAAI,CAACP;IACrB,CAAC;EACH;AACF;AAEA,SAASJ,cAAc,EAAErB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}